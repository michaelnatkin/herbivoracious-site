<aside class="sidebar">
  <!-- Search -->
  <div class="sidebar-section">
    <h3>search</h3>
    <div id="sidebar-search"></div>
    <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        if (!document.getElementById('sidebar-search')) return;
        new PagefindUI({
          element: "#sidebar-search",
          showSubResults: false,
          showImages: false,
          resetStyles: false,
          pageSize: 5,
          showEmptyFilters: false
        });
      });
    </script>
  </div>

  <!-- As Seen In -->
  <div class="sidebar-section">
    <h3>as seen in</h3>
    <a href="{{ "herbivoracious-around-the-web-press-clippings/" | relURL }}" class="as-seen-in">
      <img src="{{ "images/2012/06/As-Seen-On.png" | relURL }}" alt="As seen in Saveur, The New York Times, NPR, and Cooking.com">
    </a>
  </div>

  <!-- About -->
  <div class="sidebar-section">
    <h3>about</h3>
    <div class="sidebar-cards">
      <div class="sidebar-card">
        <a href="{{ "about/" | relURL }}">
          <img src="{{ "images/2012/10/Michael-Farmers-Market-130-160.jpg" | relURL }}" alt="Michael Natkin">
          <span>Michael Natkin</span>
        </a>
      </div>
      <div class="sidebar-card sidebar-card--cookbook">
        <a href="{{ "get-the-herbivoracious-cookbook/" | relURL }}">
          <img src="{{ "images/2012/03/Book-Standing-Closed-Cutout-220.png" | relURL }}" alt="Herbivoracious Cookbook">
          <img src="{{ "images/james-beard-medallion.png" | relURL }}" alt="James Beard Foundation Award" class="jb-medallion">
          <span>My Cookbook</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Shop Promo -->
  <div class="sidebar-section sidebar-shop-promo">
    <a href="{{ "shop/" | relURL }}" class="shop-promo-card">
      <img src="{{ "images/old/6a00e008d618bb88340128769f5c44970c-500wi.jpg" | relURL }}" alt="" class="shop-promo-card__img">
      <div class="shop-promo-card__overlay"></div>
      <div class="shop-promo-card__content">
        <span class="shop-promo-card__kicker">From My Kitchen</span>
        <h3 class="shop-promo-card__title">Shop My Pantry</h3>
        <p class="shop-promo-card__desc">The tools &amp; ingredients I reach for every day</p>
        <span class="shop-promo-card__cta">Browse recommendations <span class="shop-promo-card__arrow">â†’</span></span>
      </div>
    </a>
  </div>

  <!-- Amazon Gateway -->
  <div class="sidebar-section sidebar-amazon-gateway">
    <a href="https://www.amazon.com/s?k=gourmet+food&tag=herb-hugo-20" class="amazon-gateway-link" target="_blank" rel="noopener sponsored">
      <span class="amazon-gateway-link__icon">ðŸ›’</span>
      <span class="amazon-gateway-link__text">
        <strong>Support this site</strong>
        Shop on Amazon
      </span>
      <span class="amazon-gateway-link__arrow">â†’</span>
    </a>
  </div>

  <!-- Most Popular -->
  <div class="sidebar-section">
    <h3>most popular</h3>
    {{ $popular := slice
      "potatoes-with-crispy-curry-leaves-recipe"
      "vegan-bacon-from-king-oyster-mushrooms-recipe"
      "hungry-ghost-moroccan-carrot-salad-recipe"
      "why-you-need-an-instant-read-kitchen-thermometer"
      "crepes-with-roasted-french-plums-yogurt-and-honey"
    }}
    {{ range $popular }}
      {{ $p := site.GetPage (printf "/posts/%s" .) }}
      {{ if $p }}
      <div class="popular-post">
        {{ $img := "" }}
        {{ with $p.Params.cover }}{{ with .image }}{{ $img = . }}{{ end }}{{ end }}
        {{ if $img }}
        <a href="{{ $p.Permalink }}"><img src="{{ strings.TrimPrefix "/" $img | relURL }}" alt="{{ $p.Title }}" loading="lazy"></a>
        {{ end }}
        <a href="{{ $p.Permalink }}">{{ $p.Title }}</a>
      </div>
      {{ end }}
    {{ end }}
  </div>

  <!-- Topics (categories with hierarchy) -->
  <div class="sidebar-section">
    <h3>topics</h3>
    <ul class="topics-list">
      {{ range .Site.Taxonomies.categories.Alphabetical }}
      <li>
        <a href="{{ .Page.Permalink }}">{{ .Page.Title }}</a>
        <span class="count">({{ .Count }})</span>
      </li>
      {{ end }}
    </ul>
  </div>
</aside>
