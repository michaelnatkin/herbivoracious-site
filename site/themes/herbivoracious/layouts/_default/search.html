{{ define "main" }}
<div class="site-content">
  <main class="main-content">
    <div class="search-page">
      <h1>Search</h1>
      <div id="search"></div>
    </div>
  </main>

  {{ partial "sidebar.html" . }}
</div>

<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  window.addEventListener('DOMContentLoaded', function() {
    new PagefindUI({
      element: "#search",
      showSubResults: true,
      showImages: true,
      autofocus: true
    });

    // Restore query from URL parameter
    const params = new URLSearchParams(window.location.search);
    const q = params.get('q');
    if (q) {
      const input = document.querySelector('.pagefind-ui__search-input');
      if (input) {
        input.value = q;
        input.dispatchEvent(new Event('input', { bubbles: true }));
      }
    }
  });
</script>
{{ end }}
